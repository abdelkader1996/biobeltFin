{"version":3,"sources":["./src/app/namepiege/namepiege.page.html","./src/app/namepiege/namepiege-routing.module.ts","./src/app/namepiege/namepiege.module.ts","./src/app/namepiege/namepiege.page.scss","./src/app/namepiege/namepiege.page.ts"],"names":[],"mappings":"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","file":"namepiege-namepiege-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <!--<ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n      <ion-back-button defaultHref=\\\"home\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Paramètres UPC</ion-title>\\n    <ion-buttons slot=\\\"end\\\" *ngIf=\\\"!global.isBBAM\\\">\\n      <ion-button fill=\\\"clear\\\"> <ion-icon name=\\\"globe\\\" color=\\\"light\\\" (click)=\\\"onSynchroB1B2();\\\"></ion-icon>ADMIN</ion-button> \\n     </ion-buttons>\\n     <ion-buttons slot=\\\"end\\\" *ngIf=\\\"global.isBBAM\\\">\\n      <ion-button fill=\\\"clear\\\"> <ion-icon name=\\\"wifi\\\" color=\\\"light\\\"></ion-icon>{{global.ssid}}</ion-button> \\n     </ion-buttons>\\n  </ion-toolbar>-->  \\n  </ion-header>\\n\\n<ion-content>\\n  <ion-refresher slot=\\\"fixed\\\" id=\\\"refresher\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  <h3 style=\\\"text-align: center;\\\">Paramètres Généraux UPC</h3>\\n  <ion-card>\\n    <ion-card-content>\\n      <ion-row><ion-col size=\\\"6\\\">Nom de l'UPC</ion-col><ion-col size=\\\"6\\\"><ion-input [(ngModel)]=\\\"name\\\" enterkeyhint=\\\"enter\\\" placeholder=\\\"Nom de l'UPC...\\\" (ionFocus)=\\\"unsubscribeRefresh()\\\" (focusout)=\\\"onChangeName();\\\"></ion-input></ion-col></ion-row>\\n      <ion-row><ion-col size=\\\"6\\\">Nombre de pièges</ion-col><ion-col size=\\\"6\\\"><ion-input [(ngModel)]=\\\"nbpiege\\\" enterkeyhint=\\\"enter\\\" placeholder=\\\"Nombre de pièges...\\\" (ionFocus)=\\\"unsubscribeRefresh()\\\" (focusout)=\\\"onChangePieges();\\\"></ion-input></ion-col></ion-row>\\n      <ion-row><ion-col size=\\\"6\\\">UUID</ion-col><ion-col size=\\\"6\\\">{{uuid}}</ion-col></ion-row>\\n      <ion-row><ion-col size=\\\"6\\\">Fuseau Horaire (h)</ion-col><ion-col size=\\\"6\\\"><ion-input [(ngModel)]=\\\"fusehor\\\" enterkeyhint=\\\"enter\\\" type=\\\"number\\\" (ionFocus)=\\\"unsubscribeRefresh()\\\" (focusout)=\\\"onChangeFusHor()\\\"></ion-input></ion-col></ion-row>\\n      <ion-row><ion-col size=\\\"6\\\">Horloge</ion-col><ion-col size=\\\"6\\\">{{horloge}}</ion-col></ion-row>\\n      <ion-row><ion-col size=\\\"6\\\">Firmware</ion-col><ion-col size=\\\"6\\\">{{\\\"v\\\"+firm}}</ion-col></ion-row>\\n    </ion-card-content>\\n  </ion-card>\\n  \\n\\n  <div style=\\\"text-align: center;\\\">\\n  <ion-button color=\\\"danger\\\" (click)=\\\"onWipe();\\\">\\n    WIPE\\n  </ion-button>\\n  <ion-button color=\\\"warning\\\" (click)=\\\"onReset();\\\">RESET</ion-button>\\n</div>\\n</ion-content>\\n<ion-footer style=\\\"display: inline-block\\\">\\n  <ion-button *ngIf=\\\"!global.displayLoading\\\" style=\\\"float: left\\\" fill=\\\"clear\\\" (click)=\\\"global.onReadStatiqueEnable()\\\">    \\n    <ion-icon name=\\\"refresh\\\"></ion-icon>\\n  </ion-button>\\n  <ion-button *ngIf=\\\"global.displayLoading\\\" style=\\\"float: left;\\\" fill=\\\"clear\\\" color=\\\"primary\\\">\\n    <ion-spinner></ion-spinner>\\n  </ion-button>\\n</ion-footer>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NamepiegePage } from './namepiege.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NamepiegePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NamepiegePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NamepiegePageRoutingModule } from './namepiege-routing.module';\n\nimport { NamepiegePage } from './namepiege.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NamepiegePageRoutingModule\n  ],\n  declarations: [NamepiegePage]\n})\nexport class NamepiegePageModule {}\n","module.exports = \"ion-input {\\n  border: solid 1px black;\\n  text-align: center;\\n  color: black;\\n}\\n\\nion-col {\\n  color: black;\\n}\\n\\n/*.bgred {\\n\\tbackground-color: red;\\n    color : black;\\n}*/\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbmFtZXBpZWdlL0M6XFxVc2Vyc1xcZGV2ZWxcXE9uZURyaXZlXFxCdXJlYXVcXGItRGV2L3NyY1xcYXBwXFxuYW1lcGllZ2VcXG5hbWVwaWVnZS5wYWdlLnNjc3MiLCJzcmMvYXBwL25hbWVwaWVnZS9uYW1lcGllZ2UucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksdUJBQUE7RUFDQSxrQkFBQTtFQUNBLFlBQUE7QUNDSjs7QURDQTtFQUNJLFlBQUE7QUNFSjs7QURDQTs7O0VBQUEiLCJmaWxlIjoic3JjL2FwcC9uYW1lcGllZ2UvbmFtZXBpZWdlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1pbnB1dHtcbiAgICBib3JkZXI6IHNvbGlkIDFweCBibGFjaztcbiAgICB0ZXh0LWFsaWduIDpjZW50ZXI7XG4gICAgY29sb3IgOiBibGFjaztcbiB9XG5pb24tY29sIHtcbiAgICBjb2xvcjogYmxhY2s7XG59XG5cbi8qLmJncmVkIHtcblx0YmFja2dyb3VuZC1jb2xvcjogcmVkO1xuICAgIGNvbG9yIDogYmxhY2s7XG59Ki9cblxuIiwiaW9uLWlucHV0IHtcbiAgYm9yZGVyOiBzb2xpZCAxcHggYmxhY2s7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgY29sb3I6IGJsYWNrO1xufVxuXG5pb24tY29sIHtcbiAgY29sb3I6IGJsYWNrO1xufVxuXG4vKi5iZ3JlZCB7XG5cdGJhY2tncm91bmQtY29sb3I6IHJlZDtcbiAgICBjb2xvciA6IGJsYWNrO1xufSovIl19 */\"","import { Component, NgZone, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { GlobalService } from '../api/global.service';\nimport { UPCModbus } from 'src/app/model/upcv3/upcmodbus';\nimport { AlertController, Events, Platform } from '@ionic/angular';\nimport { CorrespondancesRegistres } from '../model/upcv3/correspondancesRegistres';\n\n\ndeclare var WifiWizard2: any;\n\n@Component({\n  selector: 'app-namepiege',\n  templateUrl: './namepiege.page.html',\n  styleUrls: ['./namepiege.page.scss'],\n})\nexport class NamepiegePage {\n  name : string = \"\";\n  nbpiege : number = 0;\n  upc : UPCModbus;\n  uuid : string = \"\";\n  fusehor : number;\n  horloge : string;\n  aube : string;\n  crep : string;\n  langue : string;\n  firm : string = \"\";\n  redBackground = false;\n  length = 0;\n  correspondancesRegistres: CorrespondancesRegistres;\n  // Pièges sauvegardes plan\n  constructor(private global : GlobalService,\n              private platform : Platform,\n              private ngZone : NgZone,\n              private cd : ChangeDetectorRef,\n              private alertCTRL : AlertController,\n              private events : Events\n              ) {this.global.checkMode() }\n\n              ionViewWillEnter(){\n\n      \n          this.global.connexionRequise = \"UPC\"\n\n          this.correspondancesRegistres = new CorrespondancesRegistres()\n\n          this.global.onReadStatiqueEnable().then(()=>{\n            this.subscribeRefresh()\n          })\n\n          \n         \n          \n       \n            this.horloge = this.global.upcmodbus.general.upcClock\n                    \n          \n         \n  }\n  doRefresh(event) {\n    this.ionViewWillEnter();\n    event.target.complete();\n\n}\n  toZero4(d) {\n    \n    return (\"0000\" + (+d).toString(16)).substr(-4);\n\n  }\n  onChangeName() {\n    var d=new Date()\n    this.global.logs.push(this.global.msToTime(d.getTime())+\" - appel on change upcname\")\n    this.global.onWriteEnable(this.correspondancesRegistres.upcNameId,this.name)\n  }\n  onChangePieges() {\n    var d=new Date()\n    this.global.logs.push(this.global.msToTime(d.getTime())+\" - appel on change nbpiege\")\n    this.global.onWriteEnable(this.correspondancesRegistres.upcTrapNum,this.nbpiege)\n  }\n  /*async onWipe() {\n    let alert = await this.alertCTRL.create({message : \"Êtes vous sûr d'effectuer un Wipe ?\",\n                                             buttons : [{text : \"Non\"},{text : \"Oui\",handler : ()=>{\n                                              this.global.onWriteModbusVariables().then(res=>{\n                                                var d = new Date()\n                                                this.global.logs.push(this.global.msToTime(d.getTime())+\" - début écriture\")\n                                                this.global.ecritureEnCours = true;\n                                                this.global.upcmodbus.client.setIntInHoldingRegister(40011,1,61166).then(res=>{\n                                                  var d = new Date()\n                                                  this.global.logs.push(this.global.msToTime(d.getTime())+\" - écriture réussie\")\n                                                  this.subscribeRefresh()\n                                                  this.global.ecritureEnCours = false;    \n                                                }).catch(err=>{\n                                                  var d = new Date()\n                                                  this.global.logs.push(this.global.msToTime(d.getTime())+\" - écriture échouée\")\n                                                  this.subscribeRefresh()\n                                                  this.global.ecritureEnCours = false;\n                                                })   \n                                              })\n                                             }}]\n                                      })\n    alert.present();\n  }\n\n  async onReset() {\n    let alert = await this.alertCTRL.create({message : \"Êtes vous sûr d'effectuer un Reset ?\",\n                                             buttons : [{text : \"Non\"},{text : \"Oui\", handler : ()=>{\n                                              this.global.onWriteModbusVariables().then(res=>{\n                                                var d = new Date()\n                                                this.global.logs.push(this.global.msToTime(d.getTime())+\" - début écriture\")\n                                                this.global.ecritureEnCours = true;\n                                                this.global.upcmodbus.client.setIntInHoldingRegister(40011,1,65535).then(res=>{\n                                                  var d = new Date()\n                                                  this.global.logs.push(this.global.msToTime(d.getTime())+\" - écriture réussie\")\n                                                  this.subscribeRefresh()\n                                                  this.global.ecritureEnCours = false;                                                \n                                                }).catch(err=>{\n                                                  var d = new Date()\n                                                  this.global.logs.push(this.global.msToTime(d.getTime())+\" - écriture échouée\")\n                                                  this.subscribeRefresh()\n                                                  this.global.ecritureEnCours = false; \n                                                })                                                 \n                                              })\n                                                \n                                              \n                                             }}]\n    })\n    alert.present();\n    \n  }*/\n  onChangeFusHor(){    \n    var d=new Date()\n    this.global.logs.push(this.global.msToTime(d.getTime())+\" - appel on change fushor\")\n    this.global.onWriteEnable(this.correspondancesRegistres.upcTimeZone,this.fusehor)\n   \n  }\n  \n  unsubscribeRefresh(){    \n    this.events.unsubscribe(\"loadParameters\")\n  }\n\n  subscribeRefresh(){\n    var d=new Date()\n    this.global.logs.push(this.global.msToTime(d.getTime())+\" - subscribe\")\n    this.events.subscribe(\"loadParameters\",($event)=>{\n            \n      this.name = this.global.upcmodbus.nameId;\n      this.length = this.name.length;\n    \n\n      this.nbpiege = this.global.upcmodbus.general.upcTrapNum;\n\n      this.uuid = this.global.upcmodbus.general.upcMcuUid;\n\n      this.fusehor = this.global.upcmodbus.general.upcTimeZone;\n\n      this.firm = \"\"+ this.global.upcmodbus.general.upcFwVer;\n\n  \n        this.horloge = this.global.upcmodbus.general.upcClock;\n    })\n        \n  }\n\n}\n"],"sourceRoot":""}